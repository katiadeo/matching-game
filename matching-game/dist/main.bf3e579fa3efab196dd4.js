(()=>{"use strict";var e={76:(e,t,n)=>{n.r(t)},475:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},752:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(229),a=n(366);t.App=class{constructor(e){this.rootElement=e,this.header=new a.Header,this.rootElement.appendChild(this.header.element),this.game=new s.Game,this.rootElement.appendChild(this.game.element)}start(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[1],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.createElement=(e,t)=>{const n=document.createElement(e);return t.length&&n.classList.add(...t),n},this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(76);const i=n(583),s="matched",a="disable";class r extends i.BaseComponent{constructor(e){super("div",["card__container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front" style="background: center / 60% no-repeat url('./images/${e}') black;"></div>\n        <div class="card__back"></div>\n      </div>\n    `,this.invalidClass="unmatched"}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}addAnimation(){this.element.classList.add("flip")}getWrongCard(){this.element.classList.add(this.invalidClass)}getRightCard(){this.element.classList.add(s)}disableCard(){this.element.classList.add(a)}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.classList.toggle(a,e),this.element.classList.toggle("unmatched",e),this.element.classList.toggle(s,e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=r},229:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const s=n(680),a=n(583),r=n(977),o=n(498);class l extends a.BaseComponent{constructor(){super(),this.isAnimation=!1,this.gameContainer=new o.GameContainer,this.element.appendChild(this.gameContainer.element)}newGame(e){this.gameContainer.clear();const t=e.concat(e).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.gameContainer.addCards(t)}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);if(this.activeCard.image!==e.image){yield s.delay(800);const t=new Promise((t=>{var n;Promise.all([null===(n=this.activeCard)||void 0===n?void 0:n.getWrongCard(),e.getWrongCard()])}));yield s.delay(800);const n=new Promise((t=>{var n;null===(n=this.activeCard)||void 0===n||n.disableCard(),e.disableCard()}));Promise.all([this.activeCard.flipToBack(),e.flipToBack(),t,n])}else Promise.all([this.activeCard.getRightCard(),e.getRightCard()]),yield s.delay(800);this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=l},498:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameContainer=void 0,n(475);const i=n(583);class s extends i.BaseComponent{constructor(){super("div",["game__container"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),1500)}}t.GameContainer=s},254:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavLinks=void 0;const i=n(583);class s extends i.BaseComponent{constructor(e,t="",n="",i=""){super("li",["nav__item"]),this.srcLink=t,this.textLink=n,this.hrefLink=i,this.element.setAttribute("href",`${i}`),this.element.dataset.link="",this.element.innerHTML=`\n        <a href=${i} class="nav__link" data-link>\n          <img class="nav__img" href=${i} src="${t}" alt="" data-link>\n          <span href=${i} data-link>${n}</span>\n        </a>\n        `}becomeActive(){this.element.classList.contains("active")||this.element.classList.add("active")}becomeNonActive(){this.element.classList.contains("active")&&this.element.classList.remove("active")}}t.NavLinks=s},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=n(583),s=n(254);n(528);class a extends i.BaseComponent{constructor(){super("header",["header"]),this.nav=this.createElement("nav",["nav"]),this.element.appendChild(this.nav),this.navList=this.createElement("ul",["nav__list"]),this.nav.appendChild(this.navList),this.navLinkAbout=new s.NavLinks("a","./images/png/about.png","About","/"),this.navList.appendChild(this.navLinkAbout.element),this.navLinkScore=new s.NavLinks("a","./images/png/score.png","Score","/best_score"),this.navList.appendChild(this.navLinkScore.element),this.navLinkSettings=new s.NavLinks("a","./images/png/settings.png","Settings","/settings"),this.navList.appendChild(this.navLinkSettings.element),this.regButton=new s.NavLinks("a","","",""),this.user=this.createElement("div",["nav__user"]),this.user.innerHTML='\n    <svg\n      version="1.1"\n      id="Capa_1"\n      xmlns="http://www.w3.org/2000/svg"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n      x="0px"\n      y="0px"\n      viewBox="0 0 357 357"\n      style="enable-background: new 0 0 357 357"\n      xml:space="preserve"\n    >\n      <path\n        d="M357,204H204v153h-51V204H0v-51h153V0h51v153h153V204z"\n      ></path>\n    </svg>\n    ',this.element.appendChild(this.regButton.element),this.regButton.element.appendChild(this.user)}}t.Header=a},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(387);const e=n(752);window.onload=()=>{const t=document.getElementById("root");if(!t)throw Error("App root element not found");new e.App(t).start()}})()})();